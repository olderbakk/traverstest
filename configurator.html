<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skreddersy ditt opphold ‚Äì Hotel Finse 1222</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
</head>
<body class="configurator-page">
    <header class="header">
        <nav class="nav nav-left">
            <a href="#" class="nav-link">Kontakt oss</a>
        </nav>
        <a href="index.html" class="logo">
            <img src="assets/logo/logo.png" alt="Hotel Finse 1222" class="logo-img">
        </a>
        <nav class="nav nav-right">
            <a href="configurator.html" class="btn-planlegg">Planlegg opphold</a>
        </nav>
    </header>

    <main class="configurator">
        <div class="configurator-card">
            <!-- Progress bar -->
            <div class="progress-bar" id="progress-bar">
                <div class="progress-step active" data-step="1"></div>
                <div class="progress-step" data-step="2"></div>
                <div class="progress-step" data-step="3"></div>
                <div class="progress-step" data-step="4"></div>
                <div class="progress-step" data-step="5"></div>
                <div class="progress-step" data-step="6"></div>
                <div class="progress-step" data-step="7"></div>
                <div class="progress-step" data-step="8"></div>
                <div class="progress-step" data-step="9"></div>
            </div>

            <!-- Steps container -->
            <div class="steps-container">
                <!-- Step 1: Intro -->
                <div class="step step-intro active" data-step="1">
                    <div class="step-content">
                        <span class="step-indicator">Steg 1 av 9</span>
                        <h1 class="step-title">Skreddersy ditt<br>bedriftsopphold p√• Finse 1222</h1>
                        <p class="step-description">Fortell oss om hva dere trenger og se hva vi kan tilby.<br>Tar maks 2 minutter.</p>
                        <button class="btn btn-tertiary" onclick="nextStep()">La oss komme i gang</button>
                    </div>
                    <div class="step-image">
                        <img src="assets/images/tog.png" alt="Tog til Finse">
                    </div>
                </div>

                <!-- Step 2: Anledning -->
                <div class="step step-with-image" data-step="2">
                    <div class="step-content">
                        <span class="step-indicator">Steg 2 av 9</span>
                        <h1 class="step-title">Hva er anledningen?</h1>
                        <div class="pill-options" data-group="anledning">
                            <label class="pill-option">
                                <input type="radio" name="anledning" value="teambuilding" onchange="showNextButton(2)">
                                <span class="pill-label">Teambuilding</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="anledning" value="ledersamling" onchange="showNextButton(2)">
                                <span class="pill-label">Ledersamling</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="anledning" value="seminar" onchange="showNextButton(2)">
                                <span class="pill-label">Konferanse / Seminar</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="anledning" value="firmatur" onchange="showNextButton(2)">
                                <span class="pill-label">Firmatur / Bl√•tur</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="anledning" value="julebord" onchange="showNextButton(2)">
                                <span class="pill-label">Julebord</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="anledning" value="feiring" onchange="showNextButton(2)">
                                <span class="pill-label">Jubileum / Feiring</span>
                            </label>
                        </div>
                        <div class="step-next-container" id="next-btn-2">
                            <button class="btn btn-tertiary" onclick="nextStep()">Neste ‚Üí</button>
                        </div>
                    </div>
                    <div class="step-image">
                        <img src="assets/images/finse.jpg" alt="Finse">
                    </div>
                </div>

                <!-- Step 3: Antall personer -->
                <div class="step step-with-image" data-step="3">
                    <div class="step-content">
                        <span class="step-indicator">Steg 3 av 9</span>
                        <h1 class="step-title">Hvor mange blir dere?</h1>
                        <div class="pill-options">
                            <label class="pill-option">
                                <input type="radio" name="antall" value="4-10" onchange="showNextButton(3)">
                                <span class="pill-label">4‚Äì10 personer</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="antall" value="10-20" onchange="showNextButton(3)">
                                <span class="pill-label">10‚Äì20 personer</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="antall" value="20-40" onchange="showNextButton(3)">
                                <span class="pill-label">20‚Äì40 personer</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="antall" value="40-70" onchange="showNextButton(3)">
                                <span class="pill-label">40‚Äì70 personer</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="antall" value="70+" onchange="showNextButton(3)">
                                <span class="pill-label">70+ (hele hotellet)</span>
                            </label>
                        </div>
                        <div class="step-next-container" id="next-btn-3">
                            <button class="btn btn-tertiary" onclick="nextStep()">Neste ‚Üí</button>
                        </div>
                    </div>
                    <div class="step-image">
                        <img src="assets/images/finse.jpg" alt="Finse">
                    </div>
                </div>

                <!-- Step 4: Varighet -->
                <div class="step step-with-image" data-step="4">
                    <div class="step-content">
                        <span class="step-indicator">Steg 4 av 9</span>
                        <h1 class="step-title">Hvor lenge vil dere bli?</h1>
                        <div class="pill-options">
                            <label class="pill-option">
                                <input type="radio" name="varighet" value="1" onchange="showNextButton(4)">
                                <span class="pill-label">1 natt üåô</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="varighet" value="2" onchange="showNextButton(4)">
                                <span class="pill-label">2 netter ‚≠ê</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="varighet" value="3+" onchange="showNextButton(4)">
                                <span class="pill-label">3+ netter üèîÔ∏è</span>
                            </label>
                        </div>
                        <div class="step-next-container" id="next-btn-4">
                            <button class="btn btn-tertiary" onclick="nextStep()">Neste ‚Üí</button>
                        </div>
                    </div>
                    <div class="step-image">
                        <img src="assets/images/finse.jpg" alt="Finse">
                    </div>
                </div>

                <!-- Step 5: Aktiviteter -->
                <div class="step step-with-image" data-step="5">
                    <div class="step-content">
                        <span class="step-indicator">Steg 5 av 9</span>
                        <h1 class="step-title">Hvilke aktiviteter frister?</h1>
                        <p class="step-description">Velg s√• mange du vil</p>
                        <div class="pill-options">
                            <label class="pill-option">
                                <input type="checkbox" name="aktiviteter" value="rallarvegen" onchange="showNextButton(5)">
                                <span class="pill-label">Sykle Rallarvegen</span>
                            </label>
                            <label class="pill-option">
                                <input type="checkbox" name="aktiviteter" value="bre" onchange="showNextButton(5)">
                                <span class="pill-label">Brevandring / Bl√•isen</span>
                            </label>
                            <label class="pill-option">
                                <input type="checkbox" name="aktiviteter" value="polartime" onchange="showNextButton(5)">
                                <span class="pill-label">Polartime p√• Framheim</span>
                            </label>
                            <label class="pill-option">
                                <input type="checkbox" name="aktiviteter" value="ski" onchange="showNextButton(5)">
                                <span class="pill-label">Langrenn / Skiturer</span>
                            </label>
                            <label class="pill-option">
                                <input type="checkbox" name="aktiviteter" value="kiting" onchange="showNextButton(5)">
                                <span class="pill-label">Snowkiting / Skiseiling</span>
                            </label>
                            <label class="pill-option">
                                <input type="checkbox" name="aktiviteter" value="vandring" onchange="showNextButton(5)">
                                <span class="pill-label">Fjellvandring</span>
                            </label>
                            <label class="pill-option">
                                <input type="checkbox" name="aktiviteter" value="badstu" onchange="showNextButton(5)">
                                <span class="pill-label">Badstu & morgenbad</span>
                            </label>
                            <label class="pill-option">
                                <input type="checkbox" name="aktiviteter" value="ro" onchange="showNextButton(5)">
                                <span class="pill-label">Fokus p√• ro og mat</span>
                            </label>
                        </div>
                        <div class="step-next-container" id="next-btn-5">
                            <button class="btn btn-tertiary" onclick="nextStep()">Neste ‚Üí</button>
                        </div>
                    </div>
                    <div class="step-image">
                        <img src="assets/images/finse.jpg" alt="Finse">
                    </div>
                </div>

                <!-- Step 6: Tidspunkt -->
                <div class="step step-with-image" data-step="6">
                    <div class="step-content">
                        <span class="step-indicator">Steg 6 av 9</span>
                        <h1 class="step-title">N√•r passer det best?</h1>
                        <p class="step-description">Aktiviteter varierer med sesongen</p>
                        <div class="pill-options">
                            <label class="pill-option">
                                <input type="radio" name="tidspunkt" value="vinter" onchange="showNextButton(6)">
                                <span class="pill-label">Vinter (des‚Äìapr)</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="tidspunkt" value="sommer" onchange="showNextButton(6)">
                                <span class="pill-label">Sommer (jul‚Äìsep)</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="tidspunkt" value="host" onchange="showNextButton(6)">
                                <span class="pill-label">H√∏st (sep‚Äìnov)</span>
                            </label>
                            <label class="pill-option">
                                <input type="radio" name="tidspunkt" value="fleksibel" onchange="showNextButton(6)">
                                <span class="pill-label">Vi er fleksible</span>
                            </label>
                        </div>
                        <div class="step-next-container" id="next-btn-6">
                            <button class="btn btn-tertiary" onclick="nextStep()">Neste ‚Üí</button>
                        </div>
                    </div>
                    <div class="step-image">
                        <img src="assets/images/finse.jpg" alt="Finse">
                    </div>
                </div>

                <!-- Step 7: Bedriftsnavn -->
                <div class="step step-with-image" data-step="7">
                    <div class="step-content">
                        <span class="step-indicator">Steg 7 av 9</span>
                        <h1 class="step-title">Hvem er dere?</h1>
                        <p class="step-description">S√• lager vi en personlig reiseplan</p>
                        <div class="company-input">
                            <input type="text" id="bedriftsnavn" placeholder="Bedriftsnavn" class="input-large" oninput="toggleCompanyNext()">
                        </div>
                        <div class="step-next-container" id="next-btn-7">
                            <button class="btn btn-tertiary" onclick="goToOnepager()">Se reiseplanen ‚Üí</button>
                        </div>
                    </div>
                    <div class="step-image">
                        <img src="assets/images/finse.jpg" alt="Finse">
                    </div>
                </div>

                <!-- Step 8: Onepager -->
                <div class="step step-onepager" data-step="8">
                    <div class="onepager" id="onepager">
                        <div class="onepager-header">
                            <img src="assets/logo/logo.png" alt="Hotel Finse 1222" class="onepager-logo">
                        </div>
                        
                        <div class="onepager-hero">
                            <span class="onepager-label">Bedriftstur til Finse</span>
                            <h1 class="onepager-company" id="onepager-company">Bedriftsnavn</h1>
                            <p class="onepager-subtitle" id="onepager-subtitle">‚Äì</p>
                        </div>
                        
                        <div class="onepager-itinerary" id="onepager-itinerary">
                            <!-- Generated by JS -->
                        </div>
                        
                        <div class="onepager-footer">
                            <div class="onepager-meta">
                                <span id="onepager-antall">‚Äì</span>
                                <span class="meta-divider">‚Ä¢</span>
                                <span id="onepager-tidspunkt">‚Äì</span>
                                <span class="meta-divider">‚Ä¢</span>
                                <span id="onepager-varighet">‚Äì</span>
                            </div>
                            <div class="onepager-brand">
                                finse1222.no
                            </div>
                        </div>
                    </div>
                    
                    <div class="onepager-actions">
                        <button class="btn btn-outline-light" onclick="copyShareLink()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                            Del reiseplanen
                        </button>
                        <button class="btn btn-tertiary" onclick="nextStep()">Send foresp√∏rsel ‚Üí</button>
                    </div>
                </div>

                <!-- Step 9: Kontaktinfo -->
                <div class="step step-with-image" data-step="9">
                    <div class="step-content">
                        <span class="step-indicator">Steg 9 av 9</span>
                        <h1 class="step-title">Nesten i m√•l!</h1>
                        <p class="step-description">Hvor sender vi tilbudet?</p>
                        <form class="contact-form" onsubmit="submitForm(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="navn">Ditt navn</label>
                                    <input type="text" id="navn" name="navn" required placeholder="Ola Nordmann">
                                </div>
                                <div class="form-group">
                                    <label for="bedrift">Bedrift</label>
                                    <input type="text" id="bedrift" name="bedrift" required placeholder="Bedriften AS">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="epost">E-post</label>
                                    <input type="email" id="epost" name="epost" required placeholder="ola@bedriften.no">
                                </div>
                                <div class="form-group">
                                    <label for="telefon">Telefon</label>
                                    <input type="tel" id="telefon" name="telefon" placeholder="+47 123 45 678">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="kommentar">Noe mer vi b√∏r vite?</label>
                                <textarea id="kommentar" name="kommentar" rows="3" placeholder="Spesielle √∏nsker, allergier, sp√∏rsm√•l..."></textarea>
                            </div>
                            <div class="form-submit">
                                <button type="submit" class="btn btn-tertiary">Send foresp√∏rsel ‚Üí</button>
                            </div>
                        </form>
                    </div>
                    <div class="step-image">
                        <img src="assets/images/finse.jpg" alt="Finse">
                    </div>
                </div>

                <!-- Success state -->
                <div class="step step-success" data-step="success">
                    <div class="step-content step-content-centered">
                        <div class="success-icon">‚úì</div>
                        <h1 class="step-title">Takk for din foresp√∏rsel!</h1>
                        <p class="step-description">Vi har mottatt dine √∏nsker og sender deg et skreddersydd tilbud innen 24 timer.</p>
                        <a href="index.html" class="btn btn-tertiary">Tilbake til forsiden</a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let currentStep = 1;
        const totalSteps = 9;

        // Mappings for readable labels
        const labels = {
            anledning: {
                'teambuilding': 'Teambuilding',
                'ledersamling': 'Ledersamling',
                'seminar': 'Konferanse',
                'firmatur': 'Firmatur',
                'julebord': 'Julebord',
                'feiring': 'Feiring'
            },
            antall: {
                '4-10': '4‚Äì10 personer',
                '10-20': '10‚Äì20 personer',
                '20-40': '20‚Äì40 personer',
                '40-70': '40‚Äì70 personer',
                '70+': '70+ personer'
            },
            varighet: {
                '1': '1 natt',
                '2': '2 netter',
                '3+': '3+ netter'
            },
            tidspunkt: {
                'vinter': 'Vinter',
                'sommer': 'Sommer',
                'host': 'H√∏st',
                'fleksibel': 'Fleksibel'
            },
            aktiviteter: {
                'rallarvegen': 'Rallarvegen',
                'bre': 'Brevandring',
                'polartime': 'Polartime',
                'ski': 'Langrenn',
                'kiting': 'Snowkiting',
                'vandring': 'Fjellvandring',
                'badstu': 'Badstu',
                'ro': 'Ro & mat'
            }
        };

        function updateProgress() {
            document.querySelectorAll('.progress-step').forEach((el, index) => {
                el.classList.toggle('active', index < currentStep);
                el.classList.toggle('current', index + 1 === currentStep);
            });
        }

        function showStep(step) {
            document.querySelectorAll('.step').forEach(el => {
                el.classList.remove('active');
            });
            const targetStep = document.querySelector(`.step[data-step="${step}"]`);
            if (targetStep) {
                targetStep.classList.add('active');
            }
            
            // Show/hide progress bar
            const progressBar = document.getElementById('progress-bar');
            if (step === 8) {
                progressBar.style.display = 'none';
            } else {
                progressBar.style.display = 'flex';
            }
            
            updateProgress();
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function showNextButton(stepNum) {
            const nextBtn = document.getElementById(`next-btn-${stepNum}`);
            if (nextBtn) {
                nextBtn.classList.add('visible');
            }
        }

        function getSelectedValue(name) {
            const el = document.querySelector(`input[name="${name}"]:checked`);
            return el ? el.value : null;
        }

        function getSelectedCheckboxes(name) {
            const els = document.querySelectorAll(`input[name="${name}"]:checked`);
            return Array.from(els).map(el => el.value);
        }

        function goToSummary() {
            // Just go to company name step
            currentStep = 7;
            showStep(7);
        }

        function toggleCompanyNext() {
            const companyName = document.getElementById('bedriftsnavn').value.trim();
            const nextBtn = document.getElementById('next-btn-7');
            if (companyName.length > 0) {
                nextBtn.classList.add('visible');
            } else {
                nextBtn.classList.remove('visible');
            }
        }

        function goToOnepager() {
            // Gather all values
            const anledning = getSelectedValue('anledning');
            const antall = getSelectedValue('antall');
            const varighet = getSelectedValue('varighet');
            const tidspunkt = getSelectedValue('tidspunkt');
            const aktiviteter = getSelectedCheckboxes('aktiviteter');
            const bedriftsnavn = document.getElementById('bedriftsnavn').value.trim() || 'Deres bedrift';

            // Store for URL sharing
            window.packageData = { anledning, antall, varighet, tidspunkt, aktiviteter, bedriftsnavn };

            // Update onepager
            document.getElementById('onepager-company').textContent = bedriftsnavn;
            
            const anledningText = labels.anledning[anledning]?.replace(/[^\w\s√¶√∏√•√Ü√ò√Ö]/g, '').trim() || 'opplevelse';
            document.getElementById('onepager-subtitle').textContent = `${anledningText} p√• Norges tak`;
            
            document.getElementById('onepager-antall').textContent = labels.antall[antall] || '‚Äì';
            document.getElementById('onepager-tidspunkt').textContent = labels.tidspunkt[tidspunkt] || '‚Äì';
            document.getElementById('onepager-varighet').textContent = labels.varighet[varighet] || '‚Äì';

            // Generate itinerary
            const itinerary = generateItinerary(varighet, aktiviteter, tidspunkt);
            document.getElementById('onepager-itinerary').innerHTML = itinerary;

            // Hide progress bar on onepager
            document.getElementById('progress-bar').style.display = 'none';

            currentStep = 8;
            showStep(8);
        }

        function generateItinerary(varighet, aktiviteter, tidspunkt) {
            const isWinter = tidspunkt === 'vinter';
            const isSummer = tidspunkt === 'sommer';
            const nights = varighet === '1' ? 1 : varighet === '2' ? 2 : 3;
            
            // Activity descriptions
            const activityDetails = {
                'rallarvegen': { name: 'Rallarvegen p√• sykkel', desc: 'Norges vakreste sykkeltur fra Finse til Fl√•m. Matpakke og bagasjetransport inkludert.', icon: 'üö¥', summer: true },
                'bre': { name: 'Brevandring til Bl√•isen', desc: 'Guidet tur til brekanten av Hardangerj√∏kulen ‚Äì en uforglemmelig opplevelse.', icon: 'üèîÔ∏è', summer: false },
                'polartime': { name: 'Polartime p√• Framheim', desc: 'Historiefortelling om Nansen, Amundsen og polarhistorien i autentiske omgivelser.', icon: 'üé≠', summer: false },
                'ski': { name: 'Langrenn p√• vidda', desc: 'Preparerte l√∏yper rett utenfor d√∏ra. Utleie av utstyr tilgjengelig.', icon: '‚õ∑Ô∏è', summer: false },
                'kiting': { name: 'Snowkiting / Skiseiling', desc: 'Kurs for nybegynnere og viderekomne. Finse er Norges beste kitedestinasjon.', icon: 'ü™Å', summer: false },
                'vandring': { name: 'Fjellvandring', desc: isSummer ? 'Dagsturer p√• Hardangervidda med fantastisk utsikt.' : 'Trugeturer i vinterlandskap.', icon: 'ü•æ', summer: true },
                'badstu': { name: 'Badstu & morgenbad', desc: 'Start dagen med badstu og et forfriskende morgenbad i fjellet.', icon: 'üßñ', summer: false },
                'ro': { name: 'Ro, refleksjon & god mat', desc: 'Fokus p√• gode samtaler, fantastisk mat og stillhet uten forstyrrelser.', icon: '‚ú®', summer: false }
            };

            let html = '';

            // DAG 1
            html += `
                <div class="itinerary-day">
                    <div class="day-header">
                        <span class="day-number">Dag 1</span>
                        <span class="day-title">Ankomst</span>
                    </div>
                    <div class="day-timeline">
                        <div class="timeline-item">
                            <span class="timeline-time">üöÇ</span>
                            <div class="timeline-content">
                                <strong>Ankomst Finse stasjon</strong>
                                <p>Vi m√∏ter dere p√• perrongen. Bergensbanen stopper rett ved hotellet.</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <span class="timeline-time">üè®</span>
                            <div class="timeline-content">
                                <strong>Innsjekking & velkomstdrikke</strong>
                                <p>Bli kjent med hotellet, 1222 meter over havet.</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <span class="timeline-time">üçΩÔ∏è</span>
                            <div class="timeline-content">
                                <strong>3-retters middag</strong>
                                <p>Lokale r√•varer fra Hardangervidda. Reinsdyr, √∏rret og sesongbaserte retter.</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // DAG 2 (if 2+ nights)
            if (nights >= 2) {
                let dag2Activities = '';
                const selectedActs = aktiviteter.slice(0, 2); // Max 2 activities for day 2
                
                if (selectedActs.length > 0) {
                    selectedActs.forEach(act => {
                        const detail = activityDetails[act];
                        if (detail) {
                            dag2Activities += `
                                <div class="timeline-item">
                                    <span class="timeline-time">${detail.icon}</span>
                                    <div class="timeline-content">
                                        <strong>${detail.name}</strong>
                                        <p>${detail.desc}</p>
                                    </div>
                                </div>
                            `;
                        }
                    });
                } else {
                    // Default activities based on season
                    if (isSummer) {
                        dag2Activities = `
                            <div class="timeline-item">
                                <span class="timeline-time">üö¥</span>
                                <div class="timeline-content">
                                    <strong>Rallarvegen p√• sykkel</strong>
                                    <p>Norges vakreste sykkeltur fra Finse til Fl√•m.</p>
                                </div>
                            </div>
                        `;
                    } else {
                        dag2Activities = `
                            <div class="timeline-item">
                                <span class="timeline-time">‚õ∑Ô∏è</span>
                                <div class="timeline-content">
                                    <strong>Aktiviteter p√• vidda</strong>
                                    <p>Langrenn, turer eller kiting ‚Äì utstyr kan l√•nes.</p>
                                </div>
                            </div>
                        `;
                    }
                }

                html += `
                    <div class="itinerary-day">
                        <div class="day-header">
                            <span class="day-number">Dag 2</span>
                            <span class="day-title">Opplevelser</span>
                        </div>
                        <div class="day-timeline">
                            <div class="timeline-item">
                                <span class="timeline-time">‚òÄÔ∏è</span>
                                <div class="timeline-content">
                                    <strong>Frokost med utsikt</strong>
                                    <p>Hjemmelaget br√∏d, lokalt spekemat og eggeretter.</p>
                                </div>
                            </div>
                            ${dag2Activities}
                            <div class="timeline-item">
                                <span class="timeline-time">üç∑</span>
                                <div class="timeline-content">
                                    <strong>Aperitiff & festmiddag</strong>
                                    <p>4-retters meny med vinpakke.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // DAG 3 (if 3+ nights)
            if (nights >= 3) {
                const remainingActs = aktiviteter.slice(2);
                let dag3Activities = '';

                if (remainingActs.length > 0) {
                    remainingActs.slice(0, 2).forEach(act => {
                        const detail = activityDetails[act];
                        if (detail) {
                            dag3Activities += `
                                <div class="timeline-item">
                                    <span class="timeline-time">${detail.icon}</span>
                                    <div class="timeline-content">
                                        <strong>${detail.name}</strong>
                                        <p>${detail.desc}</p>
                                    </div>
                                </div>
                            `;
                        }
                    });
                }

                const defaultDag3 = isWinter ? `
                    <div class="timeline-item">
                        <span class="timeline-time">üèîÔ∏è</span>
                        <div class="timeline-content">
                            <strong>Tur til Bl√•isen</strong>
                            <p>Guidet tur til brekanten av Hardangerj√∏kulen.</p>
                        </div>
                    </div>
                ` : `
                    <div class="timeline-item">
                        <span class="timeline-time">ü•æ</span>
                        <div class="timeline-content">
                            <strong>Fjellvandring</strong>
                            <p>Heldagstur p√• Hardangervidda med fantastisk utsikt.</p>
                        </div>
                    </div>
                `;

                html += `
                    <div class="itinerary-day">
                        <div class="day-header">
                            <span class="day-number">Dag 3</span>
                            <span class="day-title">${isWinter ? 'Ekspedisjon' : 'Eventyr'}</span>
                        </div>
                        <div class="day-timeline">
                            <div class="timeline-item">
                                <span class="timeline-time">üåÑ</span>
                                <div class="timeline-content">
                                    <strong>Frokost</strong>
                                    <p>Energip√•fyll f√∏r dagens eventyr.</p>
                                </div>
                            </div>
                            ${dag3Activities || defaultDag3}
                            <div class="timeline-item">
                                <span class="timeline-time">üé≠</span>
                                <div class="timeline-content">
                                    <strong>Polartime p√• Framheim</strong>
                                    <p>Historiefortelling om Nansen og Amundsen.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // AVREISE
            html += `
                <div class="itinerary-day itinerary-day-last">
                    <div class="day-header">
                        <span class="day-number">Dag ${nights + 1}</span>
                        <span class="day-title">Avreise</span>
                    </div>
                    <div class="day-timeline">
                        <div class="timeline-item">
                            <span class="timeline-time">‚òï</span>
                            <div class="timeline-content">
                                <strong>Sen frokost</strong>
                                <p>Rolig start p√• dagen.</p>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <span class="timeline-time">üëã</span>
                            <div class="timeline-content">
                                <strong>Utsjekk & tog tilbake</strong>
                                <p>Vi f√∏lger dere til perrongen. Takk for bes√∏ket!</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            return html;
        }

        function copyShareLink() {
            const data = window.packageData;
            if (!data) return;

            const params = new URLSearchParams();
            if (data.anledning) params.set('a', data.anledning);
            if (data.antall) params.set('n', data.antall);
            if (data.varighet) params.set('v', data.varighet);
            if (data.tidspunkt) params.set('t', data.tidspunkt);
            if (data.aktiviteter && data.aktiviteter.length) params.set('ak', data.aktiviteter.join(','));
            if (data.bedriftsnavn) params.set('b', encodeURIComponent(data.bedriftsnavn));

            const url = `${window.location.origin}${window.location.pathname}?${params.toString()}`;
            
            navigator.clipboard.writeText(url).then(() => {
                const btn = event.target.closest('button');
                const originalText = btn.innerHTML;
                btn.innerHTML = '‚úì Kopiert!';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            });
        }

        function loadFromURL() {
            const params = new URLSearchParams(window.location.search);
            
            if (params.has('a')) {
                const el = document.querySelector(`input[name="anledning"][value="${params.get('a')}"]`);
                if (el) el.checked = true;
            }
            if (params.has('n')) {
                const el = document.querySelector(`input[name="antall"][value="${params.get('n')}"]`);
                if (el) el.checked = true;
            }
            if (params.has('v')) {
                const el = document.querySelector(`input[name="varighet"][value="${params.get('v')}"]`);
                if (el) el.checked = true;
            }
            if (params.has('t')) {
                const el = document.querySelector(`input[name="tidspunkt"][value="${params.get('t')}"]`);
                if (el) el.checked = true;
            }
            if (params.has('ak')) {
                const aktiviteter = params.get('ak').split(',');
                aktiviteter.forEach(a => {
                    const el = document.querySelector(`input[name="aktiviteter"][value="${a}"]`);
                    if (el) el.checked = true;
                });
            }
            if (params.has('b')) {
                document.getElementById('bedriftsnavn').value = decodeURIComponent(params.get('b'));
            }

            // If URL has parameters, go directly to onepager
            if (params.toString()) {
                goToOnepager();
            }
        }

        function submitForm(e) {
            e.preventDefault();
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            document.querySelector('.step-success').classList.add('active');
            document.querySelectorAll('.progress-step').forEach(el => el.classList.add('active'));
        }

        // Initialize
        showStep(1);
        loadFromURL();
    </script>
</body>
</html>
